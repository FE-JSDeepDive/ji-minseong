# Ch-43 Ajax

---

## Ajax란?
- Ajax(Asynchronous JavaScript and XML)는 비동기적으로 데이터를 주고받기 위한 기술
- 웹 페이지를 새로 고침하지 않고도 서버와 통신할 수 있게 해줌
- 주로 XMLHttpRequest 객체를 사용하여 구현

## JSON
- Ajax에서 주로 사용되는 데이터 형식
- JavaScript Object Notation의 약자
- 경량 데이터 교환 형식으로, 사람이 읽고 쓰기 쉬우며 기계가 분석하고 생성하기 쉬움
- 예시
```json
{
  "name": "John",
  "age": 30,
  "city": "New York"
}
```
- JSON.parse(): JSON 문자열을 JavaScript 객체로 변환 -> 이 과정을 deserializing(역직렬화)라고 함
- JSON.stringify(): JavaScript 객체를 JSON 문자열로 변환 -> 이 과정을 serializing(직렬화)라고 함

## XMLHttpRequest 객체
- Ajax의 핵심 구성 요소
- 서버와의 비동기 통신을 가능하게 해줌
```javascript
function fetchData(url) {
  const xhr = new XMLHttpRequest();
  xhr.open('GET', url);
  xhr.onreadystatechange = function() {
    if (xhr.readyState === 4) {
      if (xhr.status === 200) {
        console.log(xhr.responseText);
      } else {
        console.error('Error fetching data');
      }
    }
  };
  xhr.send();
}
```

### XMLHttpRequest 주요 메서드와 프로퍼티
- `open(method, url, async)`: 요청 초기화
- `send(body)`: 요청 전송
- `setRequestHeader(header, value)`: 요청 헤더 설정
- `readyState`: 요청 상태 (0-4)
- `status`: HTTP 상태 코드
- `responseText`: 응답 데이터 (텍스트 형식)
- `responseXML`: 응답 데이터 (XML 형식) 
- `onreadystatechange`: 요청 상태 변경 시 호출되는 콜백 함수
- `onload`: 요청이 성공적으로 완료되었을 때 호출되는 콜백 함수
- `onerror`: 요청이 실패했을 때 호출되는 콜백 함수

### XMLHttpRequest headers
- 요청 헤더 설정: `xhr.setRequestHeader('Content-Type', 'application/json');`
- 응답 헤더 확인: `xhr.getResponseHeader('Content-Type');`
- 요청 헤더 확인: `xhr.getAllResponseHeaders();`
- 주요 MIME 타입
  - `application/json`: JSON 데이터
  - `text/html`: HTML 문서
  - `text/plain`: 일반 텍스트
  - `application/xml`: XML 데이터
  - `application/x-www-form-urlencoded`: 폼 데이터


