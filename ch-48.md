# Ch-48 모듈

---

## 모듈의 일반적 의미
- **모듈이란 애플리케이션을 구성하는 개별적 요소, 재사용 가능한 코드 조각**을 의미
- 모듈은 자신만의 파일 스코프를 가지며, 다른 모듈과 독립적으로 동작
- 모듈은 특정 기능을 캡슐화하여 코드의 재사용성과 유지보수성을 향상시킴
- 모듈은 일반적으로 **내보내기(export)** 와 **가져오기(import)** 를 통해 다른 모듈과 상호작용

## 자바스크립트의 모듈
- 최초 : 웹페이지 단순 보조 기능 처리 목적 -> 모듈 시스템 지원 안함
- 점차 복잡한 애플리케이션 개발 요구 -> 모듈 시스템 필요성 대두
- CommonJS, AMD 등 다양한 모듈 시스템 등장
  - CommonJS: 서버 사이드 자바스크립트 환경에서 주로 사용 (Node.js)
    - ECMAScript 표준 사양은 아니지만 모듈 시스템으로 널리 채택
  - AMD: 비동기 모듈 로딩 지원, 주로 브라우저 환경에서 사용
- ES6(ECMAScript 2015)에서 공식적으로 모듈 시스템 도입 -> 현재 표준 모듈 시스템으로 자리잡음

## ES6 모듈 시스템(ECMAScript Modules, ESM)
- 대부분 브라우저(ex . Chrome, Firefox, Edge)와 Node.js에서 지원
- `script` 태그에 `type="module"` 속성 추가하여 모듈 사용 가능
```html
<script type="module" src="main.js"></script>
```
- 확장자는 기본적으로 ESM임을 명확히 하기 위해서 `.mjs` 사용을 권장
- ESM은 엄격 모드(`strict mode`)로 동작

### strict mode
- JavaScript의 엄격한 실행 모드로, 보다 안전하고 예측 가능한 코드를 작성할 수 있도록 도와줌
  - 자세히 : Strict mode는 코드의 일부 기능을 제한하여 오류를 방지하는 원리로 작동
- ESM에서는 기본적으로 strict mode가 적용되므로, 별도로 선언할 필요 없음
- strict mode의 주요 특징
  - 변수를 선언하지 않고 사용할 수 없음
  - 읽기 전용 프로퍼티에 값을 할당할 수 없음
  - `this`가 `undefined`인 경우 에러 발생

## 모듈 스코프
- ESM 모듈은 자체적인 파일 스코프를 가짐

## export 키워드
- 모듈에서 특정 변수, 함수, 클래스를 외부에 공개하려면 `export` 키워드를 사용
- `export` 키워드는 다음과 같이 사용할 수 있음
  - **명시적 내보내기**: 특정 식별자를 내보내기 위해 `export` 키워드를 사용
  - **기본 내보내기**: 모듈당 하나의 기본 내보내기를 가질 수 있으며, `export default` 키워드를 사용
    - **주의** default 키워드 사용하는 경우 `var`, `let`, `const` 키워드와 함께 사용할 수 없음

## import 키워드
- 다른 모듈에서 내보낸 변수, 함수, 클래스를 가져오기 위해 `import` 키워드를 사용
- `import` 키워드는 다음과 같이 사용할 수 있음
  - **명시적 가져오기**: 중괄호 `{}`를 사용하여 특정 식별자를 가져옴
  - **기본 가져오기**: 기본 내보내기를 가져올 때 사용
- **ESM의 경우 확장자 생략할 수 없다.**
- 예시
```js
// math.js
export const PI = 3.14;
export function add(x, y) {
  return x + y;
}
export default function subtract(x, y) {
  return x - y;
}
```
```js
// main.js
import subtract, { PI, add } from './math.js';  
console.log(PI); // 3.14
console.log(add(2, 3)); // 5
console.log(subtract(5, 2)); // 3
``` 